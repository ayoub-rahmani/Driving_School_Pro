<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.shape.SVGPath?>

<BorderPane prefHeight="600.0" prefWidth="800.0"
            styleClass="backup-container"
            stylesheets="@../Styles/Common.css"
            xmlns="http://javafx.com/javafx/8"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.example.Controllers.BackupController">

    <top>
        <!-- Header Section -->
        <VBox spacing="0">
            <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="backup-header">
                <children>
                    <Label styleClass="backup-title" text="Gestion des sauvegardes">
                        <font>
                            <Font name="System Bold" size="20.0" />
                        </font>
                    </Label>

                    <Region HBox.hgrow="ALWAYS" />

                    <Button fx:id="refreshBtn" mnemonicParsing="false" onAction="#handleRefresh"
                            styleClass="icon-button" text="Actualiser">
                        <tooltip>
                            <Tooltip text="Actualiser la liste des sauvegardes"/>
                        </tooltip>
                        <graphic>
                            <SVGPath content="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"
                                     fill="white" scaleX="0.8" scaleY="0.8"/>
                        </graphic>
                    </Button>
                </children>
                <padding>
                    <Insets bottom="15.0" left="20.0" right="20.0" top="15.0"/>
                </padding>
            </HBox>
        </VBox>
    </top>

    <center>
        <!-- Table of Backups -->
        <VBox spacing="10.0" BorderPane.alignment="CENTER" styleClass="backup-table-container">
            <padding>
                <Insets bottom="10.0" left="20.0" right="20.0" top="10.0"/>
            </padding>

            <TableView fx:id="backupTable" VBox.vgrow="ALWAYS" styleClass="table-view">
                <columns>
                    <TableColumn fx:id="fileNameColumn" prefWidth="300.0" text="Nom du fichier" />
                    <TableColumn fx:id="fileSizeColumn" prefWidth="100.0" text="Taille" />
                    <TableColumn fx:id="creationDateColumn" prefWidth="200.0" text="Date de création" />
                </columns>
                <placeholder>
                    <Label text="Aucune sauvegarde disponible" />
                </placeholder>
            </TableView>

            <HBox alignment="CENTER_LEFT" spacing="10.0">
                <ProgressIndicator fx:id="progressIndicator" progress="-1.0" />
                <Label fx:id="statusLabel" text="Prêt" styleClass="status-label" />
            </HBox>
        </VBox>
    </center>

    <bottom>
        <!-- Action Buttons -->
        <HBox alignment="CENTER" spacing="20.0" styleClass="backup-footer">
            <children>
                <Button fx:id="createBackupBtn" mnemonicParsing="false" onAction="#handleCreateBackup"
                        styleClass="create-button, action-button-primary" text="Créer une sauvegarde">
                    <graphic>
                        <SVGPath content="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"
                                 fill="white"/>
                    </graphic>
                </Button>
                <Button fx:id="restoreBackupBtn" mnemonicParsing="false" onAction="#handleRestoreBackup"
                        styleClass="restore-button, action-button" text="Restaurer">
                    <graphic>
                        <SVGPath content="M13,3A9,9 0 0,0 4,12H1L4.89,15.89L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3Z"
                                 fill="#007BFF"/>
                    </graphic>
                </Button>
                <Button fx:id="deleteBackupBtn" mnemonicParsing="false" onAction="#handleDeleteBackup"
                        styleClass="delete-button, action-button-danger" text="Supprimer">
                    <graphic>
                        <SVGPath content="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"
                                 fill="#DC3545"/>
                    </graphic>
                </Button>
                <Button fx:id="closeBtn" mnemonicParsing="false" onAction="#handleClose"
                        styleClass="close-button" text="Fermer">
                    <graphic>
                        <SVGPath content="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"
                                 fill="white"/>
                    </graphic>
                </Button>
            </children>
            <padding>
                <Insets bottom="15.0" left="20.0" right="20.0" top="15.0"/>
            </padding>
        </HBox>
    </bottom>
</BorderPane>

